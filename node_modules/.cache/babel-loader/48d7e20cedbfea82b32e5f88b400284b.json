{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\julan\\\\OneDrive\\\\Pulpit\\\\game_of_life_ISA\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback,useRef}from\"react\";import produce from\"immer\";var numRows=50;var numCols=50;var operations=[[0,1],[0,-1],[1,-1],[-1,1],[1,1],[-1,-1],[1,0],[-1,0]];var generateEmptyGrid=function generateEmptyGrid(){var rows=[];for(var i=0;i<numRows;i++){rows.push(Array.from(Array(numCols),function(){return 0;}));}return rows;};var App=function App(){var _useState=useState(function(){return generateEmptyGrid();}),_useState2=_slicedToArray(_useState,2),grid=_useState2[0],setGrid=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),running=_useState4[0],setRunning=_useState4[1];var runningRef=useRef(running);runningRef.current=running;var runSimulation=useCallback(function(){if(!runningRef.current){return;}setGrid(function(g){return produce(g,function(gridCopy){var _loop=function _loop(i){var _loop2=function _loop2(k){var neighbors=0;operations.forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),x=_ref2[0],y=_ref2[1];var newI=i+x;var newK=k+y;if(newI>=0&&newI<numRows&&newK>=0&&newK<numCols){neighbors+=g[newI][newK];}});if(neighbors<2||neighbors>3){gridCopy[i][k]=0;}else if(g[i][k]===0&&neighbors===3){gridCopy[i][k]=1;}};for(var k=0;k<numCols;k++){_loop2(k);}};for(var i=0;i<numRows;i++){_loop(i);}});});setTimeout(runSimulation,100);},[]);return React.createElement(React.Fragment,null,React.createElement(\"div\",{style:{justifyContent:\"center\",textAlign:\"center\"}},React.createElement(\"button\",{onClick:function onClick(){setRunning(!running);if(!running){runningRef.current=true;runSimulation();}}},running?\"Stop\":\"Start\"),React.createElement(\"button\",{onClick:function onClick(){var rows=[];for(var i=0;i<numRows;i++){rows.push(Array.from(Array(numCols),function(){return Math.random()>0.7?1:0;}));}setGrid(rows);}},\"Random\"),React.createElement(\"button\",{onClick:function onClick(){setGrid(generateEmptyGrid());}},\"Wyczy\\u015B\\u0107\"),React.createElement(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(\".concat(numCols,\", 20px)\"),justifyContent:\"center\",textAlign:\"center\"}},grid.map(function(rows,i){return rows.map(function(col,k){return React.createElement(\"div\",{key:\"\".concat(i,\"-\").concat(k),onClick:function onClick(){var newGrid=produce(grid,function(gridCopy){gridCopy[i][k]=grid[i][k]?0:1;});setGrid(newGrid);},style:{width:20,height:20,backgroundColor:grid[i][k]?\"black\":undefined,border:\"solid 1px black\"}});});}))));};export default App;","map":{"version":3,"sources":["C:/Users/julan/OneDrive/Pulpit/game_of_life_ISA/src/App.tsx"],"names":["React","useState","useCallback","useRef","produce","numRows","numCols","operations","generateEmptyGrid","rows","i","push","Array","from","App","grid","setGrid","running","setRunning","runningRef","current","runSimulation","g","gridCopy","k","neighbors","forEach","x","y","newI","newK","setTimeout","justifyContent","textAlign","Math","random","display","gridTemplateColumns","map","col","newGrid","width","height","backgroundColor","undefined","border"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useRef } from \"react\";\nimport produce from \"immer\";\n\nconst numRows = 50;\nconst numCols = 50;\n\nconst operations = [\n  [0, 1],\n  [0, -1],\n  [1, -1],\n  [-1, 1],\n  [1, 1],\n  [-1, -1],\n  [1, 0],\n  [-1, 0],\n];\n\nconst generateEmptyGrid = () => {\n  const rows = [];\n  for (let i = 0; i < numRows; i++) {\n    rows.push(Array.from(Array(numCols), () => 0));\n  }\n\n  return rows;\n};\n\nconst App: React.FC = () => {\n  const [grid, setGrid] = useState(() => {\n    return generateEmptyGrid();\n  });\n\n  const [running, setRunning] = useState(false);\n\n  const runningRef = useRef(running);\n  runningRef.current = running;\n\n  const runSimulation = useCallback(() => {\n    if (!runningRef.current) {\n      return;\n    }\n\n    setGrid((g) => {\n      return produce(g, (gridCopy) => {\n        for (let i = 0; i < numRows; i++) {\n          for (let k = 0; k < numCols; k++) {\n            let neighbors = 0;\n            operations.forEach(([x, y]) => {\n              const newI = i + x;\n              const newK = k + y;\n              if (newI >= 0 && newI < numRows && newK >= 0 && newK < numCols) {\n                neighbors += g[newI][newK];\n              }\n            });\n\n            if (neighbors < 2 || neighbors > 3) {\n              gridCopy[i][k] = 0;\n            } else if (g[i][k] === 0 && neighbors === 3) {\n              gridCopy[i][k] = 1;\n            }\n          }\n        }\n      });\n    });\n\n    setTimeout(runSimulation, 100);\n  }, []);\n\n  return (\n    <>\n      <div\n        style={{\n          justifyContent: \"center\",\n          textAlign: \"center\",\n        }}\n      >\n        <button\n          onClick={() => {\n            setRunning(!running);\n            if (!running) {\n              runningRef.current = true;\n              runSimulation();\n            }\n          }}\n        >\n          {running ? \"Stop\" : \"Start\"}\n        </button>\n        <button\n          onClick={() => {\n            const rows = [];\n            for (let i = 0; i < numRows; i++) {\n              rows.push(\n                Array.from(Array(numCols), () => (Math.random() > 0.7 ? 1 : 0))\n              );\n            }\n\n            setGrid(rows);\n          }}\n        >\n          Random\n        </button>\n        <button\n          onClick={() => {\n            setGrid(generateEmptyGrid());\n          }}\n        >\n          Wyczyść\n        </button>\n        <div\n          style={{\n            display: \"grid\",\n            gridTemplateColumns: `repeat(${numCols}, 20px)`,\n            justifyContent: \"center\",\n            textAlign: \"center\",\n          }}\n        >\n          {grid.map((rows, i) =>\n            rows.map((col, k) => (\n              <div\n                key={`${i}-${k}`}\n                onClick={() => {\n                  const newGrid = produce(grid, (gridCopy) => {\n                    gridCopy[i][k] = grid[i][k] ? 0 : 1;\n                  });\n                  setGrid(newGrid);\n                }}\n                style={{\n                  width: 20,\n                  height: 20,\n                  backgroundColor: grid[i][k] ? \"black\" : undefined,\n                  border: \"solid 1px black\",\n                }}\n              />\n            ))\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}